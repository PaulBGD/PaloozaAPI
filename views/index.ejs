<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <title>Palooza API</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="bootstrap.min.css" rel="stylesheet">
</head>
<body data-spy="scroll" data-target="#navbar">
<nav id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#home">
                Minigame <span>Palooza <span>Developers</span></span>
            </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">
            <ul class="nav navbar-nav">
                <%
                for (var property in nav) {
                    var navMethods = nav[property];
                %>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><%= property %> <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <%
                        navMethods.forEach(function (method) {
                            var path = method.parent.replace('/', '') + method.path;
                        %>
                        <li><a href="#<%= path %>"><%= method.parent + '/' + method.path %></a></li>
                        <%
                        });
                        %>
                    </ul>
                </li>
                <%
                }
                %>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://minigamepalooza.com">Return to Site</a></li>
            </ul>
        </div>
    </div>
</nav>
<div id="home" class="jumbotron text-center">
    <h1>Palooza API</h1>

    <div class="container-fixed">
        <hr>
        <div class="form-group">
            <label for="baseUrl">Base URL</label><br>
            <pre id="baseUrl" class="form-control">http://dev.minigamepalooza.com/api/v1</pre>
        </div>
        <iframe src="https://ghbtns.com/github-btn.html?user=PaulBGD&repo=PaloozaAPI&type=star&count=true&size=large" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
        <iframe src="https://ghbtns.com/github-btn.html?user=PaulBGD&repo=PaloozaAPI&type=fork&count=true&size=large" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
    </div>
</div>

<div class="container-fixed">
    <%
    for (var property in nav) {
        var methods = nav[property];
        var path = method.parent + '/' + method.path;
    %>
    <div id="<%= property %>">
        <%
        methods.forEach(function (method) {
            var path = method.parent.replace('/', '') + method.path;
        %>
        <div id="<%= path %>">
            <div class="page-header">
                <h2><%= method.parent + '/' + method.path %> <a href="#<%= path %>"><sup class="glyphicon glyphicon-link"></sup></a></h2>
            </div>
            <div class="well">
                <h3><%= method.description %></h3>

                <%
                if (Object.keys(method.params).length > 0) {
                %>
                <h4>Parameters</h4>
                <%
                }
                        for (var property in method.params) {
                    var param = method.params[property];
                %>
                <div>
                    <%
                    if (param.required) {
                    %>
                    <b>Required</b>
                    <%
                    }
                    %>
                    <code><%= property %></code> <%= param.description %>
                </div>
                <%
                }
                %>
                <h4>Example</h4>
                <pre class="form-control">POST http://dev.minigamepalooza.com/api/v1/<%= path %></pre>
                <pre class="form-control"><%= JSON.stringify(method.example, null, 3) %></pre>
            </div>
        </div>
        <%
        });
        %>
    </div>
    <%
    }
    %>
</div>
<script src="//cdn.jsdelivr.net/bootstrap.native/0.9.6/bootstrap-native.min.js"></script>
<script>
    // http://paulirish.com/2011/requestanimationframe-for-smart-animating/
    // http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating

    // requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel

    // MIT license

    (function () {
        var lastTime = 0;
        var vendors = ['ms', 'moz', 'webkit', 'o'];
        for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
            window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']
            || window[vendors[x] + 'CancelRequestAnimationFrame'];
        }
        if (!window.requestAnimationFrame)
            window.requestAnimationFrame = function (callback, element) {
                var currTime = new Date().getTime();
                var timeToCall = Math.max(0, 16 - (currTime - lastTime));
                var id = window.setTimeout(function () {
                            callback(currTime + timeToCall);
                        },
                        timeToCall);
                lastTime = currTime + timeToCall;
                return id;
            };
        if (!window.cancelAnimationFrame)
            window.cancelAnimationFrame = function (id) {
                clearTimeout(id);
            };
    }());
</script>
<script>
    (function () {
        var hrefs = document.getElementsByTagName('a');
        var length = hrefs.length;
        while (length--) {
            var a = hrefs[length];
            (function (a) {
                a.addEventListener('click', function (e) {
                    var href = a.getAttribute('href');
                    if (href && href.length > 1 && href.charAt(0) == '#') {
                        var elem = document.getElementById(href.substr(1));
                        var offsetTop = elem.offsetTop;
                        while (elem = elem.offsetParent) {
                            offsetTop += elem.offsetTop;
                        }
                        var spot = offsetTop - 70;
                        var time = Math.abs(window.scrollY - offsetTop) / 10;
                        smoothScrollTo(spot, time);
                        e.preventDefault();
                        return false;
                    }
                });
            })(a);
        }
        function smoothScrollTo(target, duration) {
            var offset = window.pageYOffset;
            var delta = target - window.pageYOffset; // Y-offset difference
            duration = duration || 1000; // default 1 sec animation
            var start = Date.now(); // get start time
            var factor = 0;

            function step() {
                var y;
                factor = (Date.now() - start) / duration; // get interpolation factor
                if (factor >= 1) {
                    clearInterval(timer); // stop animation
                    factor = 1;           // clip to max 1.0
                }
                y = factor * delta + offset;
                requestAnimationFrame(window.scrollBy.bind(window, 0, y - window.pageYOffset));
            }

            var timer = setInterval(step, 10);
            return timer; // return the interval timer, so you can clear it elsewhere
        }
    })();
</script>
</body>
</html>
